<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comet</title>
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#ffffff" id="theme-color-meta">
    <!-- Favicon using SVG Data URL -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>☄️</text></svg>">
    <!-- Apple touch icons for iOS 'Add to Home Screen' with comet emoji -->
    <!-- 180x180 for iPhone 6 Plus, iPhone 6s Plus, iPhone 7 Plus, iPhone 8 Plus, iPhone X, iPhone XS, iPhone XS Max, iPhone XR, iPhone 11, iPhone 11 Pro, iPhone 11 Pro Max, iPhone 12, iPhone 12 mini, iPhone 12 Pro, iPhone 12 Pro Max, iPhone 13, iPhone 13 mini, iPhone 13 Pro, iPhone 13 Pro Max, iPhone 14, iPhone 14 Plus, iPhone 14 Pro, iPhone 14 Pro Max, iPhone 15, iPhone 15 Plus, iPhone 15 Pro, iPhone 15 Pro Max -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 180 180%22><rect width=%22180%22 height=%22180%22 fill=%22%23f97316%22 rx=%2240%22/><text x=%2290%22 y=%22130%22 font-size=%22120%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 152x152 for iPad Pro, iPad Air, iPad mini -->
    <link rel="apple-touch-icon" sizes="152x152" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 152 152%22><rect width=%22152%22 height=%22152%22 fill=%22%23f97316%22 rx=%2234%22/><text x=%2276%22 y=%22110%22 font-size=%22100%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 144x144 for Windows Metro -->
    <link rel="apple-touch-icon" sizes="144x144" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 144 144%22><rect width=%22144%22 height=%22144%22 fill=%22%23f97316%22 rx=%2232%22/><text x=%2272%22 y=%22105%22 font-size=%2296%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 120x120 for iPhone and iPod touch -->
    <link rel="apple-touch-icon" sizes="120x120" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 120 120%22><rect width=%22120%22 height=%22120%22 fill=%22%23f97316%22 rx=%2227%22/><text x=%2260%22 y=%2288%22 font-size=%2280%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 114x114 for iPhone 4 -->
    <link rel="apple-touch-icon" sizes="114x114" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 114 114%22><rect width=%22114%22 height=%22114%22 fill=%22%23f97316%22 rx=%2225%22/><text x=%2257%22 y=%2284%22 font-size=%2276%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 76x76 for iPad -->
    <link rel="apple-touch-icon" sizes="76x76" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 76 76%22><rect width=%2276%22 height=%2276%22 fill=%22%23f97316%22 rx=%2217%22/><text x=%2238%22 y=%2256%22 font-size=%2250%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 72x72 for iPad (non-retina) -->
    <link rel="apple-touch-icon" sizes="72x72" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 72 72%22><rect width=%2272%22 height=%2272%22 fill=%22%23f97316%22 rx=%2216%22/><text x=%2236%22 y=%2253%22 font-size=%2248%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 60x60 for iPhone 3G -->
    <link rel="apple-touch-icon" sizes="60x60" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 60 60%22><rect width=%2260%22 height=%2260%22 fill=%22%23f97316%22 rx=%2213%22/><text x=%2230%22 y=%2244%22 font-size=%2240%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- 57x57 for iPhone (original) -->
    <link rel="apple-touch-icon" sizes="57x57" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 57 57%22><rect width=%2257%22 height=%2257%22 fill=%22%23f97316%22 rx=%2212%22/><text x=%2228.5%22 y=%2242%22 font-size=%2238%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- Default apple-touch-icon (fallback) -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 180 180%22><rect width=%22180%22 height=%22180%22 fill=%22%23f97316%22 rx=%2240%22/><text x=%2290%22 y=%22130%22 font-size=%22120%22 text-anchor=%22middle%22>☄️</text></svg>">
    <!-- iOS Safari specific meta tags for better PWA experience -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Comet">
    <!-- Microsoft Windows/Edge -->
    <meta name="msapplication-TileColor" content="#f97316">
    <meta name="msapplication-TileImage" content="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 144 144%22><rect width=%22144%22 height=%22144%22 fill=%22%23f97316%22 rx=%2232%22/><text x=%2272%22 y=%22105%22 font-size=%2296%22 text-anchor=%22middle%22>☄️</text></svg>">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=20240607">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Add Font Awesome for icons (optional, but helps mimic UI) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="main-container">
        <header class="search-header">
            <div class="header-left-controls">
                <button id="new-search-button" title="New Search"><i class="fas fa-plus"></i></button>
            </div>
            <!-- Optional: Logo can go here -->
            <h2 class="logo-title"><span class="comet-emoji">☄️</span> Comet</h2>
            <div class="header-controls">
                <button id="theme-toggle-button" title="Toggle Theme"><i class="fas fa-moon"></i></button>
            </div>
            <h1>Where knowledge begins</h1> 
            <form id="search-form" class="search-form-perplexity">
                <div class="input-wrapper">
                    <textarea id="search-input" placeholder="Ask anything..." required autocomplete="off" rows="1"></textarea>
                </div>
                <div class="controls-wrapper">
                    <input type="file" id="file-input" accept="image/png, image/jpeg, image/webp, application/pdf" style="display: none;">
                    <button type="button" id="attach-file-button" title="Attach File" class="circular-button"><i class="fas fa-paperclip"></i></button>
                    <select id="model-select">
                        <!-- Group OpenAI models -->
                        <optgroup label="OpenAI">
                            <option value="gpt-image-1">GPT Image 1</option>
                        </optgroup>
                        <!-- Group OpenRouter Models -->
                        <optgroup label="OpenRouter">
                            <option value="google/gemini-2.5-pro-preview" selected>Gemini 2.5 Pro Preview</option>
                            <option value="google/gemini-2.5-flash-preview-05-20:thinking">Gemini 2.5 Flash Preview 05-20 Thinking</option>
                            <option value="perplexity/sonar-reasoning-pro">Perplexity Sonar Reasoning Pro</option>
                            <option value="openai/gpt-4.1">GPT-4.1</option>
                            <option value="openai/gpt-4.5-preview">GPT-4.5 Preview</option>
                            <option value="openai/codex-mini">Codex Mini</option>
                            <option value="anthropic/claude-sonnet-4">Claude Sonnet 4</option>
                            <option value="anthropic/claude-opus-4">Claude Opus 4</option>
                        </optgroup>
                    </select>
                    <button type="submit" id="search-button" title="Submit Search" class="circular-button">
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </form>
        </header>

        <main class="results-area">
            <div id="error-container" class="error-perplexity"></div>
            <div class="thinking-indicator" style="display: none;">
                <div class="thinking-indicator-content">
                    <div class="spinner"></div>
                    <span id="thinking-text">Thinking...</span>
                </div>
            </div>
            <div id="skeleton-loader" class="skeleton-loader" style="display:none;"></div>
            <div id="reasoning-container" class="reasoning-container-perplexity" style="display: none;">
                <div class="reasoning-header">
                    <h4>
                        <button id="toggle-reasoning-btn" class="toggle-btn" title="Toggle Reasoning">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        AI Thinking Process
                    </h4>
                    <button id="copy-reasoning-btn" title="Copy Reasoning" class="copy-btn"><i class="fas fa-copy"></i></button>
                </div>
                <div id="reasoning-content" class="reasoning-content"></div>
            </div>
            <div id="results-container" class="results-container-perplexity" style="display: none;">
                <p class="placeholder-text">Your AI search results will appear here.</p>
                <button id="copy-results-btn" title="Copy Results" class="copy-btn"><i class="fas fa-copy"></i></button>
                <div id="chart-container" style="width: 100%; max-width: 700px; margin: 20px auto; display: none;">
                    <canvas id="interactive-chart"></canvas>
                </div>
            </div>
            <div id="download-area" style="text-align: center; margin-top: 15px; display: none;"></div>
        </main>

         <!-- Optional: Footer can go here -->

    </div> <!-- End main-container -->

    <script src="{{ url_for('static', filename='script.js') }}?v=20240607"></script>
    <script>
      window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>
    <script src="/_vercel/speed-insights/script.js" defer></script>
</body>
</html> 